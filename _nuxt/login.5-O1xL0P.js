import{T}from"./components.FNtWaweb.js";import q from"./Icon.m2fyG2rp.js";import{_ as z}from"./nuxt-link.cftfJ_Uw.js";import{u as I}from"./index.q7pdzPxW.js";import{u as S}from"./use-api.KTCvbQcm.js";import{_ as y,z as F,A as N,v as x,o as B,c as L,b as s,w as _,d as u,a as t,n as g,j as r,C as v,D as b,F as j,E as A,p as E,e as O}from"./entry.VGLBRfk-.js";import"./vue.f36acd1f.p9cEaaxm.js";import"./index.hPcBRl07.js";import"./index.XjgyyoPU.js";const p=i=>(E("data-v-edc8c351"),i=i(),O(),i),U={class:"form-background"},D={class:"form"},P=p(()=>t("h1",{class:"form-title text-center"},"登录",-1)),R=p(()=>t("span",{class:"form-input-label"},"用户名",-1)),$={class:"form-input-focus has-icon"},G=p(()=>t("span",{class:"form-input-label"},"密码",-1)),H={class:"form-input-focus has-icon"},J={class:"form-text mt-2 text-right"},K=p(()=>t("p",{class:"form-text mt-12 text-center"},"使用第三方账号登录",-1)),M={class:"form-third-login mt-2 text-center"},Q={class:"form-text mt-12 text-center"},W={__name:"login",setup(i){const k=I("token",""),w=S(),V=F(),c=N();let n=x(""),l=x("");function C(){V.validate().then(({valid:m,results:e,errors:f})=>{if(!m){c.error(Object.values(f)[0]);return}w("/login",{method:"POST",body:{username:n.value,password:l.value}}).then(o=>{o.code===0?(c.success("已成功登录！"),k.value=o.data.token,A("/user")):c.error("登录失败！"+o.msg)})})}function d(m){c.info("尚未实现第三方登录："+m)}return(m,e)=>{const f=T,o=q,h=z;return B(),L(j,null,[s(f,null,{default:_(()=>[u("登录")]),_:1}),t("main",U,[t("form",D,[P,t("div",{class:g(["form-input mt-12",{"has-value":r(n)}])},[R,s(r(b),{class:"form-input-text has-icon",type:"text",name:"username",placeholder:"输入邮箱",modelValue:r(n),"onUpdate:modelValue":e[0]||(e[0]=a=>v(n)?n.value=a:n=a),rules:"required|email"},null,8,["modelValue"]),t("span",$,[s(o,{name:"fa:user"})])],2),t("div",{class:g(["form-input mt-4",{"has-value":r(l)}])},[G,s(r(b),{class:"form-input-text has-icon",type:"password",name:"password",placeholder:"输入密码",modelValue:r(l),"onUpdate:modelValue":e[1]||(e[1]=a=>v(l)?l.value=a:l=a),rules:"required"},null,8,["modelValue"]),t("span",H,[s(o,{name:"fa:lock"})])],2),t("p",J,[s(h,{class:"form-link",to:"/user/forget"},{default:_(()=>[u("忘记密码？")]),_:1})]),t("button",{class:"form-button mt-6",type:"button",onClick:C},"登录"),K,t("div",M,[t("a",{class:"bg-[#0088ff]",onClick:e[2]||(e[2]=a=>d("qq"))},[s(o,{name:"fa:qq",size:"22px"})]),t("a",{class:"bg-[#08c161]",onClick:e[3]||(e[3]=a=>d("wechat"))},[s(o,{name:"fa:weixin",size:"26px"})]),t("a",{class:"bg-[#646464]",onClick:e[4]||(e[4]=a=>d("github"))},[s(o,{name:"fa:github-alt",size:"24px"})])]),t("p",Q,[u(" 没有账号？ "),s(h,{class:"form-link",to:"/user/register"},{default:_(()=>[u("点此注册")]),_:1})])])])],64)}}},lt=y(W,[["__scopeId","data-v-edc8c351"]]);export{lt as default};
